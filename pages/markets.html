<!-- Markets Page - 100+ Stocks -->
<section id="markets" class="page">
    <div class="container">
        <h1>📊 Piyasalar - 100+ Hisse Senedi Takibi</h1>

        <!-- Search and Filter -->
        <div class="market-controls">
            <div class="search-filter-bar">
                <input type="text" id="stockSearch" placeholder="🔍 Hisse ara (örn: AAPL, THYAO)..." class="search-input">

                <select id="marketFilter" class="filter-select">
                    <option value="all">Tüm Piyasalar</option>
                    <option value="us">ABD Hisseleri</option>
                    <option value="bist">BIST Hisseleri</option>
                </select>

                <select id="sectorFilter" class="filter-select">
                    <option value="all">Tüm Sektörler</option>
                    <option value="technology">Teknoloji</option>
                    <option value="financial">Finans</option>
                    <option value="healthcare">Sağlık</option>
                    <option value="energy">Enerji</option>
                    <option value="consumer">Tüketici</option>
                    <option value="industrial">Endüstriyel</option>
                </select>

                <select id="sortBy" class="filter-select">
                    <option value="name">İsme Göre</option>
                    <option value="price-high">Fiyat (Yüksek→Düşük)</option>
                    <option value="price-low">Fiyat (Düşük→Yüksek)</option>
                    <option value="change-high">Değişim % (Yüksek→Düşük)</option>
                    <option value="change-low">Değişim % (Düşük→Yüksek)</option>
                </select>
            </div>

            <div class="view-toggle">
                <button class="view-btn active" data-view="grid"><i class="fas fa-th"></i> Kart</button>
                <button class="view-btn" data-view="table"><i class="fas fa-list"></i> Tablo</button>
                <button class="view-btn" data-view="watchlist"><i class="fas fa-star"></i> İzleme Listesi (<span id="watchlistCount">0</span>)</button>
            </div>
        </div>

        <!-- Market Stats Summary -->
        <div class="market-stats">
            <div class="stat-box">
                <i class="fas fa-arrow-trend-up green"></i>
                <h4>Yükselen</h4>
                <p class="stat-number green" id="risingCount">0</p>
            </div>
            <div class="stat-box">
                <i class="fas fa-arrow-trend-down red"></i>
                <h4>Düşen</h4>
                <p class="stat-number red" id="fallingCount">0</p>
            </div>
            <div class="stat-box">
                <i class="fas fa-fire orange"></i>
                <h4>En Yüksek Hacim</h4>
                <p class="stat-number orange" id="highestVolume">-</p>
            </div>
            <div class="stat-box">
                <i class="fas fa-chart-line blue"></i>
                <h4>Ortalama Değişim</h4>
                <p class="stat-number blue" id="avgChange">0%</p>
            </div>
        </div>

        <!-- Grid View -->
        <div id="stocksGrid" class="stocks-grid">
            <!-- Stocks will be loaded here dynamically -->
        </div>

        <!-- Table View -->
        <div id="stocksTable" class="stocks-table" style="display: none;">
            <table>
                <thead>
                    <tr>
                        <th><i class="far fa-star"></i></th>
                        <th>Sembol</th>
                        <th>Şirket Adı</th>
                        <th>Sektör</th>
                        <th>Fiyat</th>
                        <th>Değişim</th>
                        <th>Değişim %</th>
                        <th>Hacim</th>
                        <th>İşlem</th>
                    </tr>
                </thead>
                <tbody id="stocksTableBody">
                    <!-- Rows will be loaded here -->
                </tbody>
            </table>
        </div>

        <!-- Watchlist View -->
        <div id="watchlistView" class="watchlist-view" style="display: none;">
            <div class="watchlist-header">
                <h2><i class="fas fa-star"></i> İzleme Listem</h2>
                <button id="clearWatchlist" class="btn-secondary"><i class="fas fa-trash"></i> Tümünü Temizle</button>
            </div>
            <div id="watchlistContainer" class="stocks-grid">
                <!-- Watchlist items will be loaded here -->
            </div>
            <div id="emptyWatchlist" class="empty-state" style="display: none;">
                <i class="fas fa-star" style="font-size: 4rem; opacity: 0.3;"></i>
                <h3>İzleme listesi boş</h3>
                <p>Hisselerin yanındaki yıldıza tıklayarak izleme listene ekle</p>
            </div>
        </div>

        <!-- Stock Detail Modal -->
        <div id="stockModal" class="modal">
            <div class="modal-content">
                <span class="modal-close">&times;</span>
                <div class="modal-header">
                    <h2 id="modalStockName">-</h2>
                    <button id="modalWatchlistBtn" class="btn-icon"><i class="far fa-star"></i></button>
                </div>
                <div class="modal-body">
                    <div class="stock-price-info">
                        <div class="current-price">
                            <span class="label">Güncel Fiyat</span>
                            <span class="value" id="modalPrice">$0.00</span>
                        </div>
                        <div class="price-change" id="modalChange">
                            <span class="change-value">+0.00</span>
                            <span class="change-percent">(+0.00%)</span>
                        </div>
                    </div>

                    <div class="stock-details-grid">
                        <div class="detail-item">
                            <span class="label">Sektör</span>
                            <span class="value" id="modalSector">-</span>
                        </div>
                        <div class="detail-item">
                            <span class="label">Açılış</span>
                            <span class="value" id="modalOpen">-</span>
                        </div>
                        <div class="detail-item">
                            <span class="label">Gün Yüksek</span>
                            <span class="value" id="modalHigh">-</span>
                        </div>
                        <div class="detail-item">
                            <span class="label">Gün Düşük</span>
                            <span class="value" id="modalLow">-</span>
                        </div>
                        <div class="detail-item">
                            <span class="label">52 Hafta Yüksek</span>
                            <span class="value" id="modal52High">-</span>
                        </div>
                        <div class="detail-item">
                            <span class="label">52 Hafta Düşük</span>
                            <span class="value" id="modal52Low">-</span>
                        </div>
                    </div>

                    <div class="stock-chart">
                        <h3>Fiyat Grafiği (30 Gün)</h3>
                        <canvas id="modalChart"></canvas>
                    </div>

                    <div class="quick-trade">
                        <h3>Hızlı İşlem (Sanal)</h3>
                        <div class="trade-controls">
                            <button class="btn-success trade-btn" data-action="buy">
                                <i class="fas fa-arrow-up"></i> AL
                            </button>
                            <input type="number" id="tradeAmount" placeholder="Adet" min="1" value="1" class="trade-input">
                            <button class="btn-danger trade-btn" data-action="sell">
                                <i class="fas fa-arrow-down"></i> SAT
                            </button>
                        </div>
                        <p class="trade-info">
                            Toplam: <span id="tradeTotal">$0.00</span> |
                            Bakiye: <span id="userBalance">$10,000.00</span>
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Loading State -->
        <div id="loadingStocks" class="loading-state">
            <div class="spinner"></div>
            <p>Piyasa verileri yükleniyor...</p>
        </div>
    </div>
</section>
